!function(e,n){"function"==typeof define&&define.amd?define("html-janitor",n):e.amdWeb=n()}(this,function(){function e(e){this.config=e}function n(e){return-1!==r.indexOf(e.nodeName)}function t(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT)}var r=["P","LI","DIV"];return e.prototype.clean=function(e){var n=document.createElement("div");return n.innerHTML=e,this._sanitize(n),n.innerHTML},e.prototype._sanitize=function(e){var r=t(e),i=r.firstChild();if(i)do{var o=i.nodeName.toLowerCase(),a=this.config.tags[o];if(!i._sanitized)if(i.nodeType!==Node.TEXT_NODE){if(i.nodeType===Node.COMMENT_NODE){e.removeChild(i),this._sanitize(e);break}var s,u="b"===o;u&&(s=Array.prototype.some.call(i.childNodes,n));var c=u&&s,f=!!e.parentNode,l=n(e)&&n(i)&&f;if(!this.config.tags[o]||c||l){if("SCRIPT"!==i.nodeName&&"STYLE"!==i.nodeName)for(;i.childNodes.length>0;)e.insertBefore(i.childNodes[0],i);e.removeChild(i),this._sanitize(e);break}for(var d=0;d<i.attributes.length;d+=1){var p=i.attributes[d],b=p.name.toLowerCase(),m=a[b],h=!m,y=m!==!0&&p.value!==m;(h||y)&&(i.removeAttribute(p.name),d-=1)}this._sanitize(i),i._sanitized=!0}else if(""===i.data.trim()&&(i.previousElementSibling&&n(i.previousElementSibling)||i.nextElementSibling&&n(i.nextElementSibling))){e.removeChild(i),this._sanitize(e);break}}while(i=r.nextSibling())},e}),define("lodash-amd/modern/internals/isNative",[],function(){function e(e){return"function"==typeof e&&r.test(e)}var n=Object.prototype,t=n.toString,r=RegExp("^"+String(t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return e}),define("lodash-amd/modern/internals/objectTypes",[],function(){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return e}),define("lodash-amd/modern/objects/isObject",["../internals/objectTypes"],function(e){function n(n){return!(!n||!e[typeof n])}return n}),define("lodash-amd/modern/utilities/noop",[],function(){function e(){}return e}),define("lodash-amd/modern/internals/baseCreate",["./isNative","../objects/isObject","../utilities/noop"],function(e,n){function t(e){return n(e)?r(e):{}}var r=e(r=Object.create)&&r;return r||(t=function(){function e(){}return function(t){if(n(t)){e.prototype=t;var r=new e;e.prototype=null}return r||window.Object()}}()),t}),define("lodash-amd/modern/internals/setBindData",["./isNative","../utilities/noop"],function(e,n){var t={configurable:!1,enumerable:!1,value:null,writable:!1},r=function(){try{var n={},t=e(t=Object.defineProperty)&&t,r=t(n,n,n)&&t}catch(i){}return r}(),i=r?function(e,n){t.value=n,r(e,"__bindData__",t)}:n;return i}),define("lodash-amd/modern/internals/slice",[],function(){function e(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(0>i?0:i);++r<i;)o[r]=e[n+r];return o}return e}),define("lodash-amd/modern/internals/baseBind",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,n,t,r){function i(i){function o(){if(u){var t=r(u);a.apply(t,arguments)}if(this instanceof o){var i=e(s.prototype),f=s.apply(i,t||arguments);return n(f)?f:i}return s.apply(c,t||arguments)}var s=i[0],u=i[2],c=i[4];return t(o,i),o}var o=[],a=o.push;return i}),define("lodash-amd/modern/internals/baseCreateWrapper",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,n,t,r){function i(o){function s(){var t=b?d:this;if(f){var o=r(f);a.apply(o,arguments)}if((l||h)&&(o||(o=r(arguments)),l&&a.apply(o,l),h&&o.length<p))return c|=16,i([u,y?c:-4&c,o,null,d,p]);if(o||(o=arguments),m&&(u=t[v]),this instanceof s){t=e(u.prototype);var j=u.apply(t,o);return n(j)?j:t}return u.apply(t,o)}var u=o[0],c=o[1],f=o[2],l=o[3],d=o[4],p=o[5],b=1&c,m=2&c,h=4&c,y=8&c,v=u;return t(s,o),s}var o=[],a=o.push;return i}),define("lodash-amd/modern/objects/isFunction",[],function(){function e(e){return"function"==typeof e}return e}),define("lodash-amd/modern/internals/createWrapper",["./baseBind","./baseCreateWrapper","../objects/isFunction","./slice"],function(e,n,t,r){function i(o,u,c,f,l,d){var p=1&u,b=2&u,m=4&u,h=16&u,y=32&u;if(!b&&!t(o))throw new TypeError;h&&!c.length&&(u&=-17,h=c=!1),y&&!f.length&&(u&=-33,y=f=!1);var v=o&&o.__bindData__;if(v&&v!==!0)return v=r(v),v[2]&&(v[2]=r(v[2])),v[3]&&(v[3]=r(v[3])),!p||1&v[1]||(v[4]=l),!p&&1&v[1]&&(u|=8),!m||4&v[1]||(v[5]=d),h&&a.apply(v[2]||(v[2]=[]),c),y&&s.apply(v[3]||(v[3]=[]),f),v[1]|=u,i.apply(null,v);var j=1==u||17===u?e:n;return j([o,u,c,f,l,d])}var o=[],a=o.push,s=o.unshift;return i}),define("lodash-amd/modern/functions/bind",["../internals/createWrapper","../internals/slice"],function(e,n){function t(t,r){return arguments.length>2?e(t,17,n(arguments,2),null,r):e(t,1,null,null,r)}return t}),define("lodash-amd/modern/utilities/identity",[],function(){function e(e){return e}return e}),define("lodash-amd/modern/support",["./internals/isNative"],function(e){var n=/\bthis\b/,t={};return t.funcDecomp=!e(window.WinRTError)&&n.test(function(){return this}),t.funcNames="string"==typeof Function.name,t}),define("lodash-amd/modern/internals/baseCreateCallback",["../functions/bind","../utilities/identity","./setBindData","../support"],function(e,n,t,r){function i(i,u,c){if("function"!=typeof i)return n;if("undefined"==typeof u||!("prototype"in i))return i;var f=i.__bindData__;if("undefined"==typeof f&&(r.funcNames&&(f=!i.name),f=f||!r.funcDecomp,!f)){var l=s.call(i);r.funcNames||(f=!o.test(l)),f||(f=a.test(l),t(i,f))}if(f===!1||f!==!0&&1&f[1])return i;switch(c){case 1:return function(e){return i.call(u,e)};case 2:return function(e,n){return i.call(u,e,n)};case 3:return function(e,n,t){return i.call(u,e,n,t)};case 4:return function(e,n,t,r){return i.call(u,e,n,t,r)}}return e(i,u)}var o=/^\s*function[ \n\r\t]+\w/,a=/\bthis\b/,s=Function.prototype.toString;return i}),define("lodash-amd/modern/internals/shimKeys",["./objectTypes"],function(e){var n=Object.prototype,t=n.hasOwnProperty,r=function(n){var r,i=n,o=[];if(!i)return o;if(!e[typeof n])return o;for(r in i)t.call(i,r)&&o.push(r);return o};return r}),define("lodash-amd/modern/objects/keys",["../internals/isNative","./isObject","../internals/shimKeys"],function(e,n,t){var r=e(r=Object.keys)&&r,i=r?function(e){return n(e)?r(e):[]}:t;return i}),define("lodash-amd/modern/objects/forOwn",["../internals/baseCreateCallback","./keys","../internals/objectTypes"],function(e,n,t){var r=function(r,i,o){var a,s=r,u=s;if(!s)return u;if(!t[typeof s])return u;i=i&&"undefined"==typeof o?i:e(i,o,3);for(var c=-1,f=t[typeof s]&&n(s),l=f?f.length:0;++c<l;)if(a=f[c],i(s[a],a,r)===!1)return u;return u};return r}),define("lodash-amd/modern/collections/forEach",["../internals/baseCreateCallback","../objects/forOwn"],function(e,n){function t(t,r,i){var o=-1,a=t?t.length:0;if(r=r&&"undefined"==typeof i?r:e(r,i,3),"number"==typeof a)for(;++o<a&&r(t[o],o,t)!==!1;);else n(t,r);return t}return t}),define("lodash-amd/modern/objects/isArray",["../internals/isNative"],function(e){var n="[object Array]",t=Object.prototype,r=t.toString,i=e(i=Array.isArray)&&i,o=i||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&r.call(e)==n||!1};return o}),define("lodash-amd/modern/objects/forIn",["../internals/baseCreateCallback","../internals/objectTypes"],function(e,n){var t=function(t,r,i){var o,a=t,s=a;if(!a)return s;if(!n[typeof a])return s;r=r&&"undefined"==typeof i?r:e(r,i,3);for(o in a)if(r(a[o],o,t)===!1)return s;return s};return t}),define("lodash-amd/modern/internals/shimIsPlainObject",["../objects/forIn","../objects/isFunction"],function(e,n){function t(t){var i,s;return t&&o.call(t)==r&&(i=t.constructor,!n(i)||i instanceof i)?(e(t,function(e,n){s=n}),"undefined"==typeof s||a.call(t,s)):!1}var r="[object Object]",i=Object.prototype,o=i.toString,a=i.hasOwnProperty;return t}),define("lodash-amd/modern/objects/isPlainObject",["../internals/isNative","../internals/shimIsPlainObject"],function(e,n){var t="[object Object]",r=Object.prototype,i=r.toString,o=e(o=Object.getPrototypeOf)&&o,a=o?function(r){if(!r||i.call(r)!=t)return!1;var a=r.valueOf,s=e(a)&&(s=o(a))&&o(s);return s?r==s||o(r)==s:n(r)}:n;return a}),define("lodash-amd/modern/internals/baseMerge",["../collections/forEach","../objects/forOwn","../objects/isArray","../objects/isPlainObject"],function(e,n,t,r){function i(o,a,s,u,c){(t(a)?e:n)(a,function(e,n){var a,f,l=e,d=o[n];if(e&&((f=t(e))||r(e))){for(var p=u.length;p--;)if(a=u[p]==e){d=c[p];break}if(!a){var b;s&&(l=s(d,e),(b="undefined"!=typeof l)&&(d=l)),b||(d=f?t(d)?d:[]:r(d)?d:{}),u.push(e),c.push(d),b||i(d,e,s,u,c)}}else s&&(l=s(d,e),"undefined"==typeof l&&(l=e)),"undefined"!=typeof l&&(d=l);o[n]=d})}return i}),define("lodash-amd/modern/internals/arrayPool",[],function(){var e=[];return e}),define("lodash-amd/modern/internals/getArray",["./arrayPool"],function(e){function n(){return e.pop()||[]}return n}),define("lodash-amd/modern/internals/maxPoolSize",[],function(){var e=40;return e}),define("lodash-amd/modern/internals/releaseArray",["./arrayPool","./maxPoolSize"],function(e,n){function t(t){t.length=0,e.length<n&&e.push(t)}return t}),define("lodash-amd/modern/objects/merge",["../internals/baseCreateCallback","../internals/baseMerge","../internals/getArray","./isObject","../internals/releaseArray","../internals/slice"],function(e,n,t,r,i,o){function a(a){var s=arguments,u=2;if(!r(a))return a;if("number"!=typeof s[2]&&(u=s.length),u>3&&"function"==typeof s[u-2])var c=e(s[--u-1],s[u--],2);else u>2&&"function"==typeof s[u-1]&&(c=s[--u]);for(var f=o(arguments,1,u),l=-1,d=t(),p=t();++l<u;)n(a,f[l],c,d,p);return i(d),i(p),a}return a}),define("lodash-amd/modern/objects/assign",["../internals/baseCreateCallback","./keys","../internals/objectTypes"],function(e,n,t){var r=function(r,i,o){var a,s=r,u=s;if(!s)return u;var c=arguments,f=0,l="number"==typeof o?2:c.length;if(l>3&&"function"==typeof c[l-2])var d=e(c[--l-1],c[l--],2);else l>2&&"function"==typeof c[l-1]&&(d=c[--l]);for(;++f<l;)if(s=c[f],s&&t[typeof s])for(var p=-1,b=t[typeof s]&&n(s),m=b?b.length:0;++p<m;)a=b[p],u[a]=d?d(u[a],s[a]):s[a];return u};return r}),define("lodash-amd/modern/internals/baseClone",["../objects/assign","../collections/forEach","../objects/forOwn","./getArray","../objects/isArray","../objects/isObject","./releaseArray","./slice"],function(e,n,t,r,i,o,a,s){function u(f,l,b,h,g){if(b){var w=b(f);if("undefined"!=typeof w)return w}var _=o(f);if(!_)return f;var E=O.call(f);if(!j[E])return f;var T=N[E];switch(E){case d:case p:return new T(+f);case m:case v:return new T(f);case y:return w=T(f.source,c.exec(f)),w.lastIndex=f.lastIndex,w}var S=i(f);if(l){var A=!h;h||(h=r()),g||(g=r());for(var k=h.length;k--;)if(h[k]==f)return g[k];w=S?T(f.length):{}}else w=S?s(f):e({},f);return S&&(C.call(f,"index")&&(w.index=f.index),C.call(f,"input")&&(w.input=f.input)),l?(h.push(f),g.push(w),(S?n:t)(f,function(e,n){w[n]=u(e,l,b,h,g)}),A&&(a(h),a(g)),w):w}var c=/\w*$/,f="[object Arguments]",l="[object Array]",d="[object Boolean]",p="[object Date]",b="[object Function]",m="[object Number]",h="[object Object]",y="[object RegExp]",v="[object String]",j={};j[b]=!1,j[f]=j[l]=j[d]=j[p]=j[m]=j[h]=j[y]=j[v]=!0;var g=Object.prototype,O=g.toString,C=g.hasOwnProperty,N={};return N[l]=Array,N[d]=Boolean,N[p]=Date,N[b]=Function,N[h]=Object,N[m]=Number,N[y]=RegExp,N[v]=String,u}),define("lodash-amd/modern/objects/cloneDeep",["../internals/baseClone","../internals/baseCreateCallback"],function(e,n){function t(t,r,i){return e(t,!0,"function"==typeof r&&n(r,i,1))}return t}),define("scribe-plugin-sanitizer",["html-janitor","lodash-amd/modern/objects/merge","lodash-amd/modern/objects/cloneDeep"],function(e,n,t){return function(r){var i=n(t(r),{tags:{em:{"class":"scribe-marker"}}});return function(n){var t=new e(i);n.registerHTMLFormatter("sanitize",t.clean.bind(t))}}});//# sourceMappingURL=scribe-plugin-sanitizer.min.js.map