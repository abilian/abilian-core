!function(e,n){"function"==typeof define&&define.amd?define("html-janitor",n):"object"==typeof exports?module.exports=n():e.HTMLJanitor=n()}(this,function(){function e(e){this.config=e}function n(e){return-1!==o.indexOf(e.nodeName)}function t(e){return-1!==a.indexOf(e.nodeName)}function r(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}var o=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],a=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return e.prototype.clean=function(e){var n=document.createElement("div");return n.innerHTML=e,this._sanitize(n),n.innerHTML},e.prototype._sanitize=function(e){var o=r(e),a=o.firstChild();if(a)do{var i=a.nodeName.toLowerCase(),c=this.config.tags[i];if(!a._sanitized)if(a.nodeType!==Node.TEXT_NODE){if(a.nodeType===Node.COMMENT_NODE){e.removeChild(a),this._sanitize(e);break}var u,l=t(a);l&&(u=Array.prototype.some.call(a.childNodes,n));var s=l&&u,f=!!e.parentNode,d=n(e)&&n(a)&&f;if(!this.config.tags[i]||s||!this.config.keepNestedBlockElements&&d){if("SCRIPT"!==a.nodeName&&"STYLE"!==a.nodeName)for(;a.childNodes.length>0;)e.insertBefore(a.childNodes[0],a);e.removeChild(a),this._sanitize(e);break}for(var b=0;b<a.attributes.length;b+=1){var m=a.attributes[b],y=m.name.toLowerCase(),p=c[y],g=!p,j=p!==!0&&m.value!==p;(g||j)&&(a.removeAttribute(m.name),b-=1)}this._sanitize(a),a._sanitized=!0}else if(""===a.data.trim()&&(a.previousElementSibling&&n(a.previousElementSibling)||a.nextElementSibling&&n(a.nextElementSibling))){e.removeChild(a),this._sanitize(e);break}}while(a=o.nextSibling())},e}),define("lodash-amd/modern/internal/arrayEach",[],function(){function e(e,n){for(var t=-1,r=e.length;++t<r&&n(e[t],t,e)!==!1;);return e}return e}),define("lodash-amd/modern/lang/isObject",[],function(){function e(e){var n=typeof e;return"function"==n||e&&"object"==n||!1}return e}),define("lodash-amd/modern/internal/toObject",["../lang/isObject"],function(e){function n(n){return e(n)?n:Object(n)}return n}),define("lodash-amd/modern/internal/baseFor",["./toObject"],function(e){function n(n,t,r){for(var o=-1,a=e(n),i=r(n),c=i.length;++o<c;){var u=i[o];if(t(a[u],u,a)===!1)break}return n}return n}),define("lodash-amd/modern/internal/isLength",[],function(){function e(e){return"number"==typeof e&&e>-1&&e%1==0&&n>=e}var n=Math.pow(2,53)-1;return e}),define("lodash-amd/modern/internal/baseToString",[],function(){function e(e){return"string"==typeof e?e:null==e?"":e+""}return e}),define("lodash-amd/modern/string/escapeRegExp",["../internal/baseToString"],function(e){function n(n){return n=e(n),n&&r.test(n)?n.replace(t,"\\$&"):n}var t=/[.*+?^${}()|[\]\/\\]/g,r=RegExp(t.source);return n}),define("lodash-amd/modern/internal/isObjectLike",[],function(){function e(e){return e&&"object"==typeof e||!1}return e}),define("lodash-amd/modern/lang/isNative",["../string/escapeRegExp","../internal/isObjectLike"],function(e,n){function t(e){return null==e?!1:c.call(e)==r?u.test(i.call(e)):n(e)&&o.test(e)||!1}var r="[object Function]",o=/^\[object .+?Constructor\]$/,a=Object.prototype,i=Function.prototype.toString,c=a.toString,u=RegExp("^"+e(c).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return t}),define("lodash-amd/modern/lang/isArguments",["../internal/isLength","../internal/isObjectLike"],function(e,n){function t(t){var a=n(t)?t.length:r;return e(a)&&i.call(t)==o||!1}var r,o="[object Arguments]",a=Object.prototype,i=a.toString;return t}),define("lodash-amd/modern/lang/isArray",["../internal/isLength","./isNative","../internal/isObjectLike"],function(e,n,t){var r="[object Array]",o=Object.prototype,a=o.toString,i=n(i=Array.isArray)&&i,c=i||function(n){return t(n)&&e(n.length)&&a.call(n)==r||!1};return c}),define("lodash-amd/modern/internal/isIndex",[],function(){function e(e,t){return e=+e,t=null==t?n:t,e>-1&&e%1==0&&t>e}var n=Math.pow(2,53)-1;return e}),define("lodash-amd/modern/internal/root",[],function(){var e={"function":!0,object:!0},n=e[typeof exports]&&exports&&!exports.nodeType&&exports,t=e[typeof module]&&module&&!module.nodeType&&module,r=n&&t&&"object"==typeof global&&global,o=e[typeof window]&&window,a=r||o!==(this&&this.window)&&o||this;return a}),define("lodash-amd/modern/support",["./lang/isNative","./internal/root"],function(e,n){var t=/\bthis\b/,r=Object.prototype,o=(o=n.window)&&o.document,a=r.propertyIsEnumerable,i={};return function(){i.funcDecomp=!e(n.WinRTError)&&t.test(function(){return this}),i.funcNames="string"==typeof Function.name;try{i.dom=11===o.createDocumentFragment().nodeType}catch(r){i.dom=!1}try{i.nonEnumArgs=!a.call(arguments,1)}catch(r){i.nonEnumArgs=!0}}(0,0),i}),define("lodash-amd/modern/object/keysIn",["../lang/isArguments","../lang/isArray","../internal/isIndex","../internal/isLength","../lang/isObject","../support"],function(e,n,t,r,o,a){function i(i){if(null==i)return[];o(i)||(i=Object(i));var c=i.length;c=c&&r(c)&&(n(i)||a.nonEnumArgs&&e(i))&&c||0;for(var l=i.constructor,s=-1,f="function"==typeof l&&l.prototype===i,d=Array(c),b=c>0;++s<c;)d[s]=s+"";for(var m in i)b&&t(m,c)||"constructor"==m&&(f||!u.call(i,m))||d.push(m);return d}var c=Object.prototype,u=c.hasOwnProperty;return i}),define("lodash-amd/modern/internal/shimKeys",["../lang/isArguments","../lang/isArray","./isIndex","./isLength","../object/keysIn","../support"],function(e,n,t,r,o,a){function i(i){for(var c=o(i),l=c.length,s=l&&i.length,f=s&&r(s)&&(n(i)||a.nonEnumArgs&&e(i)),d=-1,b=[];++d<l;){var m=c[d];(f&&t(m,s)||u.call(i,m))&&b.push(m)}return b}var c=Object.prototype,u=c.hasOwnProperty;return i}),define("lodash-amd/modern/object/keys",["../internal/isLength","../lang/isNative","../lang/isObject","../internal/shimKeys"],function(e,n,t,r){var o=n(o=Object.keys)&&o,a=o?function(n){if(n)var a=n.constructor,i=n.length;return"function"==typeof a&&a.prototype===n||"function"!=typeof n&&i&&e(i)?r(n):t(n)?o(n):[]}:r;return a}),define("lodash-amd/modern/internal/baseForOwn",["./baseFor","../object/keys"],function(e,n){function t(t,r){return e(t,r,n)}return t}),define("lodash-amd/modern/internal/arrayCopy",[],function(){function e(e,n){var t=-1,r=e.length;for(n||(n=Array(r));++t<r;)n[t]=e[t];return n}return e}),define("lodash-amd/modern/internal/baseForIn",["./baseFor","../object/keysIn"],function(e,n){function t(t,r){return e(t,r,n)}return t}),define("lodash-amd/modern/internal/shimIsPlainObject",["./baseForIn","./isObjectLike"],function(e,n){function t(t){var o;if(!n(t)||i.call(t)!=r||!a.call(t,"constructor")&&(o=t.constructor,"function"==typeof o&&!(o instanceof o)))return!1;var c;return e(t,function(e,n){c=n}),"undefined"==typeof c||a.call(t,c)}var r="[object Object]",o=Object.prototype,a=o.hasOwnProperty,i=o.toString;return t}),define("lodash-amd/modern/lang/isPlainObject",["./isNative","../internal/shimIsPlainObject"],function(e,n){var t="[object Object]",r=Object.prototype,o=r.toString,a=e(a=Object.getPrototypeOf)&&a,i=a?function(r){if(!r||o.call(r)!=t)return!1;var i=r.valueOf,c=e(i)&&(c=a(i))&&a(c);return c?r==c||a(r)==c:n(r)}:n;return i}),define("lodash-amd/modern/lang/isTypedArray",["../internal/isLength","../internal/isObjectLike"],function(e,n){function t(t){return n(t)&&e(t.length)&&T[I.call(t)]||!1}var r="[object Arguments]",o="[object Array]",a="[object Boolean]",i="[object Date]",c="[object Error]",u="[object Function]",l="[object Map]",s="[object Number]",f="[object Object]",d="[object RegExp]",b="[object Set]",m="[object String]",y="[object WeakMap]",p="[object ArrayBuffer]",g="[object Float32Array]",j="[object Float64Array]",h="[object Int8Array]",v="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",E="[object Uint8ClampedArray]",w="[object Uint16Array]",C="[object Uint32Array]",T={};T[g]=T[j]=T[h]=T[v]=T[A]=T[O]=T[E]=T[w]=T[C]=!0,T[r]=T[o]=T[p]=T[a]=T[i]=T[c]=T[u]=T[l]=T[s]=T[f]=T[d]=T[b]=T[m]=T[y]=!1;var N=Object.prototype,I=N.toString;return t}),define("lodash-amd/modern/internal/baseCopy",[],function(){function e(e,n,t){t||(t=n,n={});for(var r=-1,o=t.length;++r<o;){var a=t[r];n[a]=e[a]}return n}return e}),define("lodash-amd/modern/lang/toPlainObject",["../internal/baseCopy","../object/keysIn"],function(e,n){function t(t){return e(t,n(t))}return t}),define("lodash-amd/modern/internal/baseMergeDeep",["./arrayCopy","../lang/isArguments","../lang/isArray","./isLength","../lang/isPlainObject","../lang/isTypedArray","../lang/toPlainObject"],function(e,n,t,r,o,a,i){function c(c,l,s,f,d,b,m){for(var y=b.length,p=l[s];y--;)if(b[y]==p)return void(c[s]=m[y]);var g=c[s],j=d?d(g,p,s,c,l):u,h="undefined"==typeof j;h&&(j=p,r(p.length)&&(t(p)||a(p))?j=t(g)?g:g?e(g):[]:o(p)||n(p)?j=n(g)?i(g):o(g)?g:{}:h=!1),b.push(p),m.push(j),h?c[s]=f(j,p,d,b,m):(j===j?j!==g:g===g)&&(c[s]=j)}var u;return c}),define("lodash-amd/modern/internal/baseMerge",["./arrayEach","./baseForOwn","./baseMergeDeep","../lang/isArray","./isLength","../lang/isObject","./isObjectLike","../lang/isTypedArray"],function(e,n,t,r,o,a,i,c){function u(s,f,d,b,m){if(!a(s))return s;var y=o(f.length)&&(r(f)||c(f));return(y?e:n)(f,function(e,n,r){if(i(e))return b||(b=[]),m||(m=[]),t(s,r,n,u,d,b,m);var o=s[n],a=d?d(o,e,n,s,r):l,c="undefined"==typeof a;c&&(a=e),!y&&"undefined"==typeof a||!c&&(a===a?a===o:o!==o)||(s[n]=a)}),s}var l;return u}),define("lodash-amd/modern/utility/identity",[],function(){function e(e){return e}return e}),define("lodash-amd/modern/internal/bindCallback",["../utility/identity"],function(e){function n(n,t,r){if("function"!=typeof n)return e;if("undefined"==typeof t)return n;switch(r){case 1:return function(e){return n.call(t,e)};case 3:return function(e,r,o){return n.call(t,e,r,o)};case 4:return function(e,r,o,a){return n.call(t,e,r,o,a)};case 5:return function(e,r,o,a,i){return n.call(t,e,r,o,a,i)}}return function(){return n.apply(t,arguments)}}return n}),define("lodash-amd/modern/internal/isIterateeCall",["./isIndex","./isLength","../lang/isObject"],function(e,n,t){function r(r,o,a){if(!t(a))return!1;var i=typeof o;if("number"==i)var c=a.length,u=n(c)&&e(o,c);else u="string"==i&&o in a;if(u){var l=a[o];return r===r?r===l:l!==l}return!1}return r}),define("lodash-amd/modern/internal/createAssigner",["./bindCallback","./isIterateeCall"],function(e,n){function t(t){return function(){var r=arguments,o=r.length,a=r[0];if(2>o||null==a)return a;var i=r[o-2],c=r[o-1],u=r[3];o>3&&"function"==typeof i?(i=e(i,c,5),o-=2):(i=o>2&&"function"==typeof c?c:null,o-=i?1:0),u&&n(r[1],r[2],u)&&(i=3==o?null:i,o=2);for(var l=0;++l<o;){var s=r[l];s&&t(a,s,i)}return a}}return t}),define("lodash-amd/modern/object/merge",["../internal/baseMerge","../internal/createAssigner"],function(e,n){var t=n(e);return t}),define("lodash-amd/modern/internal/initCloneArray",[],function(){function e(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var n=Object.prototype,t=n.hasOwnProperty;return e}),define("lodash-amd/modern/utility/constant",[],function(){function e(e){return function(){return e}}return e}),define("lodash-amd/modern/internal/bufferClone",["../utility/constant","../lang/isNative","./root"],function(e,n,t){function r(e){return a.call(e,0)}var o=n(o=t.ArrayBuffer)&&o,a=n(a=o&&new o(0).slice)&&a,i=Math.floor,c=n(c=t.Uint8Array)&&c,u=function(){try{var e=n(e=t.Float64Array)&&e,r=new e(new o(10),0,1)&&e}catch(a){}return r}(),l=u?u.BYTES_PER_ELEMENT:0;return a||(r=o&&c?function(e){var n=e.byteLength,t=u?i(n/l):0,r=t*l,a=new o(n);if(t){var s=new u(a,0,t);s.set(new u(e,0,t))}return n!=r&&(s=new c(a,r),s.set(new c(e,r))),a}:e(null)),r}),define("lodash-amd/modern/internal/initCloneByTag",["./bufferClone"],function(e){function n(n,j,h){var v=n.constructor;switch(j){case c:return e(n);case t:case r:return new v(+n);case u:case l:case s:case f:case d:case b:case m:case y:case p:var A=n.buffer;return new v(h?e(A):A,n.byteOffset,n.length);case o:case i:return new v(n);case a:var O=new v(n.source,g.exec(n));O.lastIndex=n.lastIndex}return O}var t="[object Boolean]",r="[object Date]",o="[object Number]",a="[object RegExp]",i="[object String]",c="[object ArrayBuffer]",u="[object Float32Array]",l="[object Float64Array]",s="[object Int8Array]",f="[object Int16Array]",d="[object Int32Array]",b="[object Uint8Array]",m="[object Uint8ClampedArray]",y="[object Uint16Array]",p="[object Uint32Array]",g=/\w*$/;return n}),define("lodash-amd/modern/internal/initCloneObject",[],function(){function e(e){var n=e.constructor;return"function"==typeof n&&n instanceof n||(n=Object),new n}return e}),define("lodash-amd/modern/internal/baseClone",["./arrayCopy","./arrayEach","./baseCopy","./baseForOwn","./initCloneArray","./initCloneByTag","./initCloneObject","../lang/isArray","../lang/isObject","../object/keys"],function(e,n,t,r,o,a,i,c,u,l){function s(d,b,m,y,g,j,v){var A;if(m&&(A=g?m(d,y,g):m(d)),"undefined"!=typeof A)return A;if(!u(d))return d;var O=c(d);if(O){if(A=o(d),!b)return e(d,A)}else{var E=U.call(d),w=E==p;if(E!=h&&E!=f&&(!w||g))return M[E]?a(d,E,b):g?d:{};if(A=i(w?{}:d),!b)return t(d,A,l(d))}j||(j=[]),v||(v=[]);for(var C=j.length;C--;)if(j[C]==d)return v[C];return j.push(d),v.push(A),(O?n:r)(d,function(e,n){A[n]=s(e,b,m,n,d,j,v)}),A}var f="[object Arguments]",d="[object Array]",b="[object Boolean]",m="[object Date]",y="[object Error]",p="[object Function]",g="[object Map]",j="[object Number]",h="[object Object]",v="[object RegExp]",A="[object Set]",O="[object String]",E="[object WeakMap]",w="[object ArrayBuffer]",C="[object Float32Array]",T="[object Float64Array]",N="[object Int8Array]",I="[object Int16Array]",S="[object Int32Array]",k="[object Uint8Array]",x="[object Uint8ClampedArray]",L="[object Uint16Array]",F="[object Uint32Array]",M={};M[f]=M[d]=M[w]=M[b]=M[m]=M[C]=M[T]=M[N]=M[I]=M[S]=M[j]=M[h]=M[v]=M[O]=M[k]=M[x]=M[L]=M[F]=!0,M[y]=M[p]=M[g]=M[A]=M[E]=!1;var P=Object.prototype,U=P.toString;return s}),define("lodash-amd/modern/lang/cloneDeep",["../internal/baseClone","../internal/bindCallback"],function(e,n){function t(t,r,o){return r="function"==typeof r&&n(r,o,1),e(t,!0,r)}return t}),define("scribe-plugin-sanitizer",["html-janitor","lodash-amd/modern/object/merge","lodash-amd/modern/lang/cloneDeep"],function(e,n,t){return function(r){var o=n(t(r),{tags:{em:{"class":"scribe-marker"},br:{}}});return function(n){var t=new e(o);n.registerHTMLFormatter("sanitize",t.clean.bind(t))}}});
//# sourceMappingURL=scribe-plugin-sanitizer.min.js.map