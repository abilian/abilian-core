{"version":3,"file":"scribe-plugin-blockquote-command.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["../src/plugins/scribe-plugin-blockquote-command.js"],"sourcesContent":["define('scribe-plugin-blockquote-command',[],function () {\n\n  /**\n   * Adds a command for using BLOCKQUOTEs.\n   */\n\n  'use strict';\n\n  return function () {\n    return function (scribe) {\n      var blockquoteCommand = new scribe.api.SimpleCommand('blockquote', 'BLOCKQUOTE');\n\n      blockquoteCommand.execute = function () {\n        var command = scribe.getCommand(this.queryState() ? 'outdent' : 'indent');\n        command.execute();\n      };\n\n      blockquoteCommand.queryEnabled = function () {\n        var command = scribe.getCommand(this.queryState() ? 'outdent' : 'indent');\n        return command.queryEnabled();\n      };\n\n      blockquoteCommand.queryState = function () {\n        var selection = new scribe.api.Selection();\n        var blockquoteElement = selection.getContaining(function (element) {\n          return element.nodeName === 'BLOCKQUOTE';\n        });\n\n        return scribe.allowsBlockElements() && !! blockquoteElement;\n      };\n\n      scribe.commands.blockquote = blockquoteCommand;\n\n      /**\n       * If the paragraphs option is set to true, we unapply the blockquote on\n       * <enter> keypresses if the caret is on a new line.\n       */\n      if (scribe.allowsBlockElements()) {\n        scribe.el.addEventListener('keydown', function (event) {\n          if (event.keyCode === 13) { // enter\n\n            var command = scribe.getCommand('blockquote');\n            if (command.queryState()) {\n              var selection = new scribe.api.Selection();\n              if (selection.isCaretOnNewLine()) {\n                event.preventDefault();\n                command.execute();\n              }\n            }\n          }\n        });\n      }\n    };\n  };\n\n});\n\n"],"names":[]}