{"version":3,"file":"scribe-plugin-toolbar.min.js","mappings":"AAAAA,OAAA,2BAAA,WAIA,MAAA,UAAAC,GACA,MAAA,UAAAC,GACA,GAAAC,GAAAF,EAAAG,iBAAA,sBAEAC,OAAAC,UAAAC,QAAAC,KAAAL,EAAA,SAAAM,GAiCA,QAAAC,KAEA,GAAAC,GAAAT,EAAAU,WAAAH,EAAAI,QAAAC,aAEAC,EAAA,GAAAb,GAAAc,IAAAC,SAGAF,GAAAG,OAAAP,EAAAQ,WAAAV,EAAAI,QAAAO,cACAX,EAAAY,UAAAC,IAAA,UAEAb,EAAAY,UAAAE,OAAA,UAGAR,EAAAG,OAAAP,EAAAa,eACAf,EAAAgB,gBAAA,YAEAhB,EAAAiB,aAAA,WAAA,YAhDAjB,EAAAkB,iBAAA,QAAA,WAEA,GAAAhB,GAAAT,EAAAU,WAAAH,EAAAI,QAAAC,YASAZ,GAAA0B,GAAAC,QACAlB,EAAAmB,QAAArB,EAAAI,QAAAO,gBAUAlB,EAAA0B,GAAAD,iBAAA,QAAAjB,GACAR,EAAA0B,GAAAD,iBAAA,UAAAjB,GAEAR,EAAA0B,GAAAD,iBAAA,QAAAjB,GACAR,EAAA0B,GAAAD,iBAAA,OAAAjB,GAIAR,EAAA6B,GAAA,kBAAArB","sources":["../src/scribe-plugin-toolbar.js"],"sourcesContent":["define('scribe-plugin-toolbar',[],function () {\n\n  'use strict';\n\n  return function (toolbarNode) {\n    return function (scribe) {\n      var buttons = toolbarNode.querySelectorAll('[data-command-name]');\n\n      Array.prototype.forEach.call(buttons, function (button) {\n        button.addEventListener('click', function () {\n          // Look for a predefined command.\n          var command = scribe.getCommand(button.dataset.commandName);\n\n          /**\n           * Focus will have been taken away from the Scribe instance when\n           * clicking on a button (Chrome will return the focus automatically\n           * but only if the selection is not collapsed. As per: http://jsbin.com/tupaj/1/edit?html,js,output).\n           * It is important that we focus the instance again before executing\n           * the command, because it might rely on selection data.\n           */\n          scribe.el.focus();\n          command.execute(button.dataset.commandValue);\n          /**\n           * Chrome has a bit of magic to re-focus the `contenteditable` when a\n           * command is executed.\n           * As per: http://jsbin.com/papi/1/edit?html,js,output\n           */\n        });\n\n        // Keep the state of toolbar buttons in sync with the current selection.\n        // Unfortunately, there is no `selectionchange` event.\n        scribe.el.addEventListener('keyup', updateUi);\n        scribe.el.addEventListener('mouseup', updateUi);\n\n        scribe.el.addEventListener('focus', updateUi);\n        scribe.el.addEventListener('blur', updateUi);\n\n        // We also want to update the UI whenever the content changes. This\n        // could be when one of the toolbar buttons is actioned.\n        scribe.on('content-changed', updateUi);\n\n        function updateUi() {\n          // Look for a predefined command.\n          var command = scribe.getCommand(button.dataset.commandName);\n\n          var selection = new scribe.api.Selection();\n\n          // TODO: Do we need to check for the selection?\n          if (selection.range && command.queryState(button.dataset.commandValue)) {\n            button.classList.add('active');\n          } else {\n            button.classList.remove('active');\n          }\n\n          if (selection.range && command.queryEnabled()) {\n            button.removeAttribute('disabled');\n          } else {\n            button.setAttribute('disabled', 'disabled');\n          }\n        }\n      });\n    };\n  };\n\n});\n\n"],"names":["define","toolbarNode","scribe","buttons","querySelectorAll","Array","prototype","forEach","call","button","updateUi","command","getCommand","dataset","commandName","selection","api","Selection","range","queryState","commandValue","classList","add","remove","queryEnabled","removeAttribute","setAttribute","addEventListener","el","focus","execute","on"]}