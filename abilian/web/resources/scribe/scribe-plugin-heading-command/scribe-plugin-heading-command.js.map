{"version":3,"file":"scribe-plugin-heading-command.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["../src/plugins/scribe-plugin-heading-command.js"],"sourcesContent":["define('scribe-plugin-heading-command',[],function () {\n\n  /**\n   * This plugin adds a command for headings.\n   */\n\n  'use strict';\n\n  return function (level) {\n    return function (scribe) {\n      var tag = '<h' + level + '>';\n      var nodeName = 'H' + level;\n      var commandName = 'h' + level;\n\n      /**\n       * Chrome: the `heading` command doesn't work. Supported by Firefox only.\n       */\n\n      var headingCommand = new scribe.api.Command('formatBlock');\n\n      headingCommand.execute = function () {\n        if (this.queryState()) {\n          scribe.api.Command.prototype.execute.call(this, '<p>');\n        } else {\n          scribe.api.Command.prototype.execute.call(this, tag);\n        }\n      };\n\n      headingCommand.queryState = function () {\n        var selection = new scribe.api.Selection();\n        return !! selection.getContaining(function (node) {\n          return node.nodeName === nodeName;\n        });\n      };\n\n      /**\n       * All: Executing a heading command inside a list element corrupts the markup.\n       * Disabling for now.\n       */\n      headingCommand.queryEnabled = function () {\n        var selection = new scribe.api.Selection();\n        var listNode = selection.getContaining(function (node) {\n          return node.nodeName === 'OL' || node.nodeName === 'UL';\n        });\n\n        return scribe.api.Command.prototype.queryEnabled.apply(this, arguments)\n          && scribe.allowsBlockElements() && ! listNode;\n      };\n\n      scribe.commands[commandName] = headingCommand;\n    };\n  };\n\n});\n\n"],"names":[]}