{"version":3,"file":"scribe-plugin-heading-command.min.js","mappings":"AAAA,OAAA,mCAAA,WAQA,MAAA,UAAA,GACA,MAAA,UAAA,GACA,GAAA,GAAA,KAAA,EAAA,IACA,EAAA,IAAA,EACA,EAAA,IAAA,EAMA,EAAA,GAAA,GAAA,IAAA,QAAA,cAEA,GAAA,QAAA,WACA,KAAA,aACA,EAAA,IAAA,QAAA,UAAA,QAAA,KAAA,KAAA,OAEA,EAAA,IAAA,QAAA,UAAA,QAAA,KAAA,KAAA,IAIA,EAAA,WAAA,WACA,GAAA,GAAA,GAAA,GAAA,IAAA,SACA,SAAA,EAAA,cAAA,SAAA,GACA,MAAA,GAAA,WAAA,KAQA,EAAA,aAAA,WACA,GAAA,GAAA,GAAA,GAAA,IAAA,UACA,EAAA,EAAA,cAAA,SAAA,GACA,MAAA,OAAA,EAAA,UAAA,OAAA,EAAA,UAGA,OAAA,GAAA,IAAA,QAAA,UAAA,aAAA,MAAA,KAAA,YACA,EAAA,wBAAA,GAGA,EAAA,SAAA,GAAA","sources":["../src/plugins/scribe-plugin-heading-command.js"],"sourcesContent":["define('scribe-plugin-heading-command',[],function () {\n\n  /**\n   * This plugin adds a command for headings.\n   */\n\n  'use strict';\n\n  return function (level) {\n    return function (scribe) {\n      var tag = '<h' + level + '>';\n      var nodeName = 'H' + level;\n      var commandName = 'h' + level;\n\n      /**\n       * Chrome: the `heading` command doesn't work. Supported by Firefox only.\n       */\n\n      var headingCommand = new scribe.api.Command('formatBlock');\n\n      headingCommand.execute = function () {\n        if (this.queryState()) {\n          scribe.api.Command.prototype.execute.call(this, '<p>');\n        } else {\n          scribe.api.Command.prototype.execute.call(this, tag);\n        }\n      };\n\n      headingCommand.queryState = function () {\n        var selection = new scribe.api.Selection();\n        return !! selection.getContaining(function (node) {\n          return node.nodeName === nodeName;\n        });\n      };\n\n      /**\n       * All: Executing a heading command inside a list element corrupts the markup.\n       * Disabling for now.\n       */\n      headingCommand.queryEnabled = function () {\n        var selection = new scribe.api.Selection();\n        var listNode = selection.getContaining(function (node) {\n          return node.nodeName === 'OL' || node.nodeName === 'UL';\n        });\n\n        return scribe.api.Command.prototype.queryEnabled.apply(this, arguments)\n          && scribe.allowsBlockElements() && ! listNode;\n      };\n\n      scribe.commands[commandName] = headingCommand;\n    };\n  };\n\n});\n\n"],"names":[]}